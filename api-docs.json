{"openapi":"3.0.1","info":{"title":"CentralBus Proveedor API","description":"API oficial de CentralBus para exponer información de líneas de autobuses, tarifas y disponibilidad de boletos. Diseñada para integradores que deseen ofrecer servicios de compra de boletos desde sistemas externos.","contact":{"name":"CentralBus","url":"https://centralbus.mx","email":"contacto@centralbus.mx"},"license":{"name":"Licencia Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0.html"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8090/centralbus-api","description":"Generated server url"}],"tags":[{"name":"Busqueda","description":"Endpoints para obtener rutas, orígenes y destinos de autobuses disponibles"}],"paths":{"/search/seats":{"get":{"tags":["Busqueda"],"summary":"Obtener itinerarios disponibles","description":"Obtiene una lista de itinerarios agrupados por línea de autobús para una fecha de salida (y opcionalmente una de regreso), incluyendo información de precio, disponibilidad y estaciones.","operationId":"getSeats","parameters":[{"name":"Authorization","in":"header","description":"Token de autenticación JWT","required":true,"schema":{"type":"string"}},{"name":"departure_stations","in":"query","description":"Códigos de estaciones de origen","required":true,"schema":{"type":"array","items":{"type":"string"}},"example":["1001"]},{"name":"arrival_stations","in":"query","description":"Códigos de estaciones de destino","required":true,"schema":{"type":"array","items":{"type":"string"}},"example":["2001"]},{"name":"departure_date","in":"query","description":"Fecha de salida en formato yyyy-MM-dd","required":true,"schema":{"type":"string"},"example":"2025-08-01"},{"name":"return_date","in":"query","description":"Fecha de regreso en formato yyyy-MM-dd. Opcional","required":false,"schema":{"type":"string","default":"null"},"example":"2025-08-05"},{"name":"pax","in":"query","description":"Cantidad de pasajeros. Por defecto 1","required":false,"schema":{"type":"integer","format":"int32","default":1},"example":1}],"responses":{"204":{"description":"No se encontraron itinerarios disponibles","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItineraryNoContentResponse"}}}},"500":{"description":"Error interno al obtener itinerarios disponibles","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItineraryInternalErrorResponse"}}}},"429":{"description":"Demasiadas solicitudes","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItineraryTooManyRequestsResponse"}}}},"200":{"description":"Itinerarios obtenidos correctamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItineraryOkResponse"}}}}}}},"/search/origins":{"get":{"tags":["Busqueda"],"summary":"Obtener orígenes disponibles","description":"Este endpoint devuelve la lista de estaciones de origen disponibles para venta de boletos.","operationId":"getOrigins","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Estaciones obtenidas con éxito","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OriginOkResponse"}}}},"204":{"description":"Sin contenido","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OriginNoContentResponse"}}}},"500":{"description":"Error interno al obtener la estaciones de origen","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthInternalErrorResponse"}}}}}}},"/search/itineraries":{"get":{"tags":["Busqueda"],"summary":"Obtener itinerarios disponibles","description":"Obtiene una lista de itinerarios agrupados por línea de autobús para una fecha de salida (y opcionalmente una de regreso), incluyendo información de precio, disponibilidad y estaciones.","operationId":"getItineraryByCarrier","parameters":[{"name":"Authorization","in":"header","description":"Token de autenticación JWT","required":true,"schema":{"type":"string"}},{"name":"departure_stations","in":"query","description":"Códigos de estaciones de origen","required":true,"schema":{"type":"array","items":{"type":"string"}},"example":["1001"]},{"name":"arrival_stations","in":"query","description":"Códigos de estaciones de destino","required":true,"schema":{"type":"array","items":{"type":"string"}},"example":["2001"]},{"name":"departure_date","in":"query","description":"Fecha de salida en formato yyyy-MM-dd","required":true,"schema":{"type":"string"},"example":"2025-08-01"},{"name":"return_date","in":"query","description":"Fecha de regreso en formato yyyy-MM-dd. Opcional","required":false,"schema":{"type":"string","default":"null"},"example":"2025-08-05"},{"name":"pax","in":"query","description":"Cantidad de pasajeros. Por defecto 1","required":false,"schema":{"type":"integer","format":"int32","default":1},"example":1}],"responses":{"204":{"description":"No se encontraron itinerarios disponibles","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItineraryNoContentResponse"}}}},"500":{"description":"Error interno al obtener itinerarios disponibles","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItineraryInternalErrorResponse"}}}},"429":{"description":"Demasiadas solicitudes","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItineraryTooManyRequestsResponse"}}}},"200":{"description":"Itinerarios obtenidos correctamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItineraryOkResponse"}}}}}}},"/search/destinations":{"get":{"tags":["Busqueda"],"summary":"Obtener destinos disponibles","description":"Este endpoint devuelve la lista de estaciones destino, basado en los IDs de origen proporcionados.","operationId":"getOrigins_1","parameters":[{"name":"origin_ids","in":"query","description":"IDs de las estaciones de origen separados por comas. Si no se envía, se devuelve un error 204.","required":false,"schema":{"type":"string","default":"null"},"example":"1001,1002"},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Terminales obtenidas con éxito","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinyOkResponse"}}}},"204":{"description":"Sin contenido","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DestinyNoContentResponse"}}}},"500":{"description":"Error interno al obtener la estaciones de destino","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DestinyInternalErrorResponse"}}}}}}},"/health":{"get":{"tags":["Salud"],"summary":"Verificar estado del servicio","description":"Confirma que la API esté operativa y que haya conexión válida a la base de datos.","operationId":"health","responses":{"503":{"description":"El servicio no está disponible temporalmente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HealthUnavailableReponse"}}}},"200":{"description":"El servicio está operativo","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HealthOkReponse"}}}}}}},"/auth":{"get":{"tags":["Autenticación"],"summary":"Autenticación automática","description":"Genera un token JWT temporal (10 minutos) que puede utilizarse para realizar peticiones autenticadas a otros endpoints del API.","operationId":"autoLogin","responses":{"200":{"description":"Token JWT generado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthOkReponse"}}}},"500":{"description":"Error interno al generar o almacenar el token","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthInternalErrorResponse"}}}}}}}},"components":{"schemas":{"ItineraryNoContentResponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado HTTP","format":"int32","example":204},"message":{"type":"string","description":"Mensaje descriptivo de la respuesta","example":"No se encontraron itinerarios disponibles con los datos proporcionados"}},"description":"No Content"},"ItineraryInternalErrorResponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado HTTP","format":"int32","example":500},"message":{"type":"string","description":"Mensaje descriptivo del error","example":"Internal Server Error"}},"description":"Internal Server Error"},"ItineraryTooManyRequestsResponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado HTTP","format":"int32","example":429},"message":{"type":"string","description":"Mensaje descriptivo del error","example":"Nuestros servidores recibieron demasiadas peticiones. Por favor, intenta nuevamente en un minuto"}},"description":"Too Many Requests"},"FindBodyResponse":{"type":"object","properties":{"bookedOut":{"type":"boolean","description":"Indica si el viaje está agotado","example":false},"arrivalTime":{"type":"string","description":"Hora de llegada en formato ISO 8601","example":"2025-07-17T12:30:00"},"departureTime":{"type":"string","description":"Hora de salida en formato ISO 8601","example":"2025-07-17T10:00:00"},"duration":{"type":"integer","description":"Duración del viaje en minutos","format":"int64","example":150},"fareClassCode":{"type":"string","description":"Código de clase de tarifa","example":"ECON"},"price":{"type":"number","description":"Precio base del boleto","example":450.5},"departureStation":{"type":"string","description":"ID de la estación de salida","example":"ST001"},"arrivalStation":{"type":"string","description":"ID de la estación de llegada","example":"ST050"},"departureStationName":{"type":"string","description":"Nombre de la estación de salida","example":"Central de Autobuses CDMX"},"arrivalStationName":{"type":"string","description":"Nombre de la estación de llegada","example":"Terminal Monterrey"},"departureStationDirection":{"type":"string","description":"Dirección de la estación de salida","example":"Av. Insurgentes Sur 1234"},"arrivalStationDirection":{"type":"string","description":"Dirección de la estación de llegada","example":"Blvd. Constitución 4567"},"idMarketingCarrier":{"type":"string","description":"ID del operador o línea de autobús","example":"MARK123"},"tradeNameMarketingCarrier":{"type":"string","description":"Nombre comercial del operador","example":"Autobuses Rápidos S.A."},"urlLogo":{"type":"string","description":"URL del logo del operador","example":"https://example.com/logos/mark123.png"},"fareFeatures":{"type":"array","description":"Características de la tarifa, como WiFi o aire acondicionado","example":["WiFi","Aire acondicionado"],"items":{"type":"string","description":"Características de la tarifa, como WiFi o aire acondicionado","example":"[\"WiFi\",\"Aire acondicionado\"]"}}},"description":"Respuesta con detalles de itinerarios y tarifas para una ruta de autobús"},"ItinerariesBodyResponse":{"type":"object","properties":{"tradeNameMarketingCarrier":{"type":"string","description":"Nombre comercial de la línea de autobús","example":"Rapidos de Norte"},"itineraries":{"type":"array","description":"Lista de itinerarios disponibles para la línea de autobús","items":{"$ref":"#/components/schemas/FindBodyResponse"}}},"description":"Respuesta que contiene la información de itinerarios agrupados por línea de autobús"},"ItineraryOkResponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado","format":"int32","example":200},"message":{"type":"string","description":"Mensaje de respuesta","example":"Operación exitosa"},"body":{"type":"array","description":"Array de itinerarios disponibles agrupados por línea de autobús","items":{"$ref":"#/components/schemas/ItinerariesBodyResponse"}}},"description":"Success"},"OriginOkResponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado","format":"int32","example":200},"message":{"type":"string","description":"Mensaje de respuesta","example":"Operación exitosa"},"body":{"type":"array","description":"Estaciones destino","items":{"$ref":"#/components/schemas/Stations"}}},"description":"Success"},"Stations":{"type":"object","properties":{"id":{"type":"string","description":"Identificador único de la estación","example":"MX001"},"nombre":{"type":"string","description":"Nombre de la estación","example":"Terminal Norte"},"ciudad":{"type":"string","description":"Ciudad donde se encuentra la estación","example":"Ciudad de México"},"estado":{"type":"string","description":"Estado donde se encuentra la estación","example":"CDMX"}},"description":"Representa una estación de autobuses con ciudad y estado."},"OriginNoContentResponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado HTTP","format":"int32","example":204},"message":{"type":"string","description":"Mensaje descriptivo de la respuesta","example":"No Content"}},"description":"No Content"},"AuthInternalErrorResponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado HTTP","format":"int32","example":500},"message":{"type":"string","description":"Mensaje descriptivo del error","example":"Internal Server Error"}},"description":"Internal Server Error"},"DestinyOkResponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado","format":"int32","example":200},"message":{"type":"string","description":"Mensaje de respuesta","example":"Operación exitosa"},"body":{"type":"array","description":"Estaciones origen","items":{"$ref":"#/components/schemas/Stations"}}},"description":"Success"},"DestinyNoContentResponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado HTTP","format":"int32","example":204},"message":{"type":"string","description":"Mensaje descriptivo de la respuesta","example":"No Content"}},"description":"No Content"},"DestinyInternalErrorResponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado HTTP","format":"int32","example":500},"message":{"type":"string","description":"Mensaje descriptivo del error","example":"Internal Server Error"}},"description":"Internal Server Error"},"HealthUnavailableReponse":{"type":"object","properties":{"status":{"type":"string","description":"Estado del servicio","example":"DOWN"},"message":{"type":"string","description":"Mensaje que indica el estado de disponibilidad del servicio","example":"El servicio no está disponible temporalmente"}},"description":"Respuesta del estado del servicio"},"HealthOkReponse":{"type":"object","properties":{"status":{"type":"string","description":"Estado del servicio","example":"UP"},"message":{"type":"string","description":"Mensaje que indica el estado de disponibilidad del servicio","example":"El servicio está operativo"}},"description":"Respuesta del estado del servicio"},"AuthOkBody":{"type":"object","properties":{"token":{"type":"string","description":"Token JWT para autenticación","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}},"description":"Respuesta con token JWT generado"},"AuthOkReponse":{"type":"object","properties":{"code":{"type":"integer","description":"Código de estado","format":"int32","example":200},"message":{"type":"string","description":"Mensaje de respuesta","example":"Operación exitosa"},"body":{"$ref":"#/components/schemas/AuthOkBody"}},"description":"Success"}}}}